/*! be-boundless Mon Sep 26 2016 17:09:07 */
(function(){!function(a,b,c,d){function e(b,c){this.element=b,this.options=a.extend({},g,c),this._defaults=g,this._name=f,this._ignoreHashChange=!1,this.init()}var f="curtain",g={scrollSpeed:400,bodyHeight:0,linksArray:[],mobile:!1,scrollButtons:{},controls:null,curtainLinks:".curtain-links",enableKeys:!0,easing:"swing",disabled:!1,nextSlide:function(){},prevSlide:function(){}};e.prototype={init:function(){var d=this;this.$element=a(this.element),this.$li=a(this.element).find(">li"),this.$liLength=this.$li.length,d.$windowHeight=a(b).height(),d.$elDatas={},d.$document=a(c),d.$window=a(b),d.webkit=navigator.userAgent.indexOf("Chrome")>-1||navigator.userAgent.indexOf("Safari")>-1,a.Android=navigator.userAgent.match(/Android/i),a.iPhone=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i),a.iPad=navigator.userAgent.match(/iPad/i),a.iOs4=/OS [1-4]_[0-9_]+ like Mac OS X/i.test(navigator.userAgent),(a.iPhone||a.iPad||a.Android||d.options.disabled)&&(this.options.mobile=!0,this.$li.css({position:"relative"}),this.$element.find(".fixed").css({position:"absolute"})),this.options.mobile?this.scrollEl=this.$element:a.mozilla||a.msie?this.scrollEl=a("html"):this.scrollEl=a("body"),d.options.controls&&(d.options.scrollButtons.up=a(d.options.controls).find('[href="#up"]'),d.options.scrollButtons.down=a(d.options.controls).find('[href="#down"]'),a.iOs4||!a.iPhone&&!a.iPad||(d.$element.css({position:"fixed",top:0,left:0,right:0,bottom:0,"-webkit-overflow-scrolling":"touch",overflow:"auto"}),a(d.options.controls).css({position:"absolute"})));var e=function(){d.setDimensions(),d.$li.eq(0).addClass("current"),d.setCache(),d.options.mobile||d.$li.eq(1).length&&d.$li.eq(1).nextAll().addClass("hidden"),d.setEvents(),d.setLinks(),d.isHashIsOnList(location.hash.substring(1))};d.$element.find("img").length?d.imageLoaded(e):e()},scrollToPosition:function(b){var c=null,e=this;if(e.scrollEl.is(":animated"))return!1;if("up"===b||"down"==b){var f="up"===b?e.$current.prev():e.$current.next();if(e.$step){e.$current.find(".current-step").length||e.$step.eq(0).addClass("current-step");var g="up"===b?e.$current.find(".current-step").prev(".step"):e.$current.find(".current-step").next(".step");g.length&&(c=e.options.mobile?g.position().top+e.$elDatas[e.$current.index()]["data-position"]:g.position().top+e.$elDatas[e.$current.index()]["data-position"])}c=c||(e.$elDatas[f.index()]===d?null:e.$elDatas[f.index()]["data-position"]),null!==c&&e.scrollEl.animate({scrollTop:c},e.options.scrollSpeed,e.options.easing)}else if("top"===b)e.scrollEl.animate({scrollTop:0},e.options.scrollSpeed,e.options.easing);else if("bottom"===b)e.scrollEl.animate({scrollTop:e.options.bodyHeight},e.options.scrollSpeed,e.options.easing);else{var h=a("#"+b).index(),i=Math.abs(e.currentIndex-h)*(4*this.options.scrollSpeed)/e.$liLength;e.scrollEl.animate({scrollTop:e.$elDatas[h]["data-position"]||null},i<=e.options.scrollSpeed?e.options.scrollSpeed:i,this.options.easing)}},scrollEvent:function(){var b=this,c=b.$document.scrollTop();if(c<b.currentP&&b.currentIndex>0)b.$current.prev().attr("id")&&b.setHash(b.$current.prev().attr("id")),b.$current.removeClass("current").css(b.webkit?{"-webkit-transform":"translateY(0px) translateZ(0)"}:{marginTop:0}).nextAll().addClass("hidden").end().prev().addClass("current").removeClass("hidden"),b.setCache(),b.options.prevSlide();else if(c<b.currentP+b.currentHeight){if(b.webkit?b.$current.css({"-webkit-transform":"translateY("+-(c-b.currentP)+"px) translateZ(0)"}):b.$current.css({marginTop:-(c-b.currentP)}),b.$fixedLength){parseInt(b.$fixed.attr("data-top"),10);c+b.$windowHeight>=b.currentP+b.currentHeight?b.$fixed.css({position:"fixed"}):b.$fixed.css({position:"absolute",marginTop:Math.abs(c-b.currentP)})}b.$stepLength&&a.each(b.$step,function(d,e){return a(e).position().top+b.currentP<=c+5&&a(e).position().top+b.currentP+a(e).height()>=c+5&&!a(e).hasClass("current-step")?(b.$step.removeClass("current-step"),a(e).addClass("current-step"),!1):void 0}),b.parallaxBg&&b.$current.css({"background-position-y":c*b.parallaxBg}),b.$fade.length&&b.$fade.css({opacity:1-c/b.$fade.attr("data-fade")}),b.$slowScroll.length&&b.$slowScroll.css({"margin-top":c/b.$slowScroll.attr("data-slow-scroll")})}else b.$current.next().attr("id")&&b.setHash(b.$current.next().attr("id")),b.$current.removeClass("current").addClass("hidden").next("li").addClass("current").next("li").removeClass("hidden"),b.setCache(),b.options.nextSlide()},scrollMobileEvent:function(){var b=this,c=b.$element.scrollTop();c+10<b.currentP&&b.currentIndex>0?(b._ignoreHashChange=!0,b.$current.prev().attr("id")&&b.setHash(b.$current.prev().attr("id")),b.$current.removeClass("current").prev().addClass("current"),b.setCache(),b.options.prevSlide()):c+10<b.currentP+b.currentHeight?b.$stepLength&&a.each(b.$step,function(d,e){a(e).position().top+b.currentP<=c&&a(e).position().top+b.currentP+a(e).outerHeight()>=c&&(a(e).hasClass("current-step")||(b.$step.removeClass("current-step"),a(e).addClass("current-step")))}):(b._ignoreHashChange=!0,b.$current.next().attr("id")&&b.setHash(b.$current.next().attr("id")),b.$current.removeClass("current").next().addClass("current"),b.setCache(),b.options.nextSlide())},setDimensions:function(){var b=this,c=0,d=!1,e=null;b.$windowHeight=b.$window.height(),this.$li.each(function(f){var g=a(this);if(d=g.hasClass("cover"),d?(g.css({height:b.$windowHeight,zIndex:999-f}).attr("data-height",b.$windowHeight).attr("data-position",c),b.$elDatas[g.index()]={"data-height":parseInt(b.$windowHeight,10),"data-position":parseInt(c,10)},c+=b.$windowHeight):(e=g.outerHeight()<=b.$windowHeight?b.$windowHeight:g.outerHeight(),g.css({minHeight:e,zIndex:999-f}).attr("data-height",e).attr("data-position",c),b.$elDatas[g.index()]={"data-height":parseInt(e,10),"data-position":parseInt(c,10)},c+=e),g.find(".fixed").length){var h=g.find(".fixed").css("top");g.find(".fixed").attr("data-top",h)}}),this.options.mobile||this.setBodyHeight()},setEvents:function(){var c=this;a(b).on("resize",function(){c.setDimensions()}),c.options.mobile?c.$element.on("scroll",function(){c.scrollMobileEvent()}):c.$window.on("scroll",function(){c.scrollEvent()}),c.options.enableKeys&&c.$document.on("keydown",function(a){return 38===a.keyCode||37===a.keyCode?(c.scrollToPosition("up"),a.preventDefault(),!1):40===a.keyCode||39===a.keyCode?(c.scrollToPosition("down"),a.preventDefault(),!1):36===a.keyCode?(c.scrollToPosition("top"),a.preventDefault(),!1):35===a.keyCode?(c.scrollToPosition("bottom"),a.preventDefault(),!1):void 0}),c.options.scrollButtons&&(c.options.scrollButtons.up&&c.options.scrollButtons.up.on("click",function(a){a.preventDefault(),c.scrollToPosition("up")}),c.options.scrollButtons.down&&c.options.scrollButtons.down.on("click",function(a){a.preventDefault(),c.scrollToPosition("down")})),c.options.curtainLinks&&a(c.options.curtainLinks).on("click",function(b){b.preventDefault();var d=a(this).attr("href");if(!c.isHashIsOnList(d.substring(1))&&e)return!1;var e=c.$elDatas[a(d).index()]["data-position"]||null;return e&&c.scrollEl.animate({scrollTop:e},c.options.scrollSpeed,c.options.easing),!1}),c.$window.on("hashchange",function(a){c._ignoreHashChange===!1&&c.isHashIsOnList(location.hash.substring(1)),c._ignoreHashChange=!1})},setBodyHeight:function(){var b=0;for(var c in this.$elDatas){var d=this.$elDatas[c];b+=d["data-height"]}this.options.bodyHeight=b,a("body").height(b)},setLinks:function(){var b=this;this.$li.each(function(){var c=a(this).attr("id")||0;b.options.linksArray.push(c)})},setHash:function(b){el=a("[href=#"+b+"]"),el.parent().siblings("li").removeClass("active"),el.parent().addClass("active"),history.pushState?history.pushState(null,null,"#"+b):location.hash=b},setCache:function(){var a=this;a.$current=a.$element.find(".current"),a.$fixed=a.$current.find(".fixed"),a.$fixedLength=a.$fixed.length,a.$step=a.$current.find(".step"),a.$stepLength=a.$step.length,a.currentIndex=a.$current.index(),a.currentP=a.$elDatas[a.currentIndex]["data-position"],a.currentHeight=a.$elDatas[a.currentIndex]["data-height"],a.parallaxBg=a.$current.attr("data-parallax-background"),a.$fade=a.$current.find("[data-fade]"),a.$slowScroll=a.$current.find("[data-slow-scroll]")},isHashIsOnList:function(b){var c=this;a.each(c.options.linksArray,function(a,d){return d===b?(c.scrollToPosition(b),!1):void 0})},readyElement:function(a,b){var c=setInterval(function(){a.length&&(b(a.length),clearInterval(c))},60)},imageLoaded:function(b){var c=this,e=c.$element.find("img"),f=e.length,g="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.bind("load.imgloaded",function(){(--f<=0&&this.src!==g||a(this).not(":visible"))&&(e.unbind("load.imgloaded"),b.call(e,this))}).each(function(){if(this.complete||this.complete===d){var a=this.src;this.src=g,this.src=a}})}},a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);var a=this,b=function(a){return a instanceof b?a:!this instanceof b?new b(a):void(this._wrapped=a)};a.BOUNDLESS=b,b.VERSION="0.1",b.TransitionEvents="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",b.AnimationDuration=1e3,b.App=Backbone.Model.extend({attributes:{map:!1,instagram:!1},initialize:function(){this.on("change:map",b.initialize)}}),b.begin=function(){b.app=new b.App,b.map=new b.Map,b.gallery=new b.Gallery,b.page=[],b.pages=new b.Pages(PAGES),b.pages.each(function(a){b.page[a.get("slug")]=new b.Page({el:".page ."+a.get("slug"),model:a})}),b.analytics=new b.Analytics},b.initialize=function(){b.search=new b.Search,b.scroll=new b.Scroll,jQuery("ul.uw-select").on("click","li.inactive",b.map.handleClickListItems),jQuery("a.play").click(function(){$("#boundless-video").hide();new YT.Player("boundless-video",{videoId:"0GFF0LcHfec",player_vars:{rel:0,controls:0,modestbranding:1,wmode:"transparent"},width:$(window).width(),height:$(window).height(),events:{onReady:function(a){a.target.playVideo(),$("#boundless-video").hide().fadeIn(),$("#close-boundless-video").show()}}});return!1}),$("#close-boundless-video").click(function(){$("#boundless-video").fadeOut(function(){$(this).replaceWith('<div id="boundless-video"/>')}),$(this).hide()})},jQuery(document).ready(b.begin),b.Beginning=Backbone.View.extend({el:"body",events:{},initialize:function(){b.initialize()}}),b.Navigation=Backbone.View.extend({el:".navigation",hidden:!1,events:{},initialize:function(a){}}),b.Search=Backbone.View.extend({el:"li.search",searchBar:"input.search-bar",events:{click:"expandTheSearchBar"},initialize:function(){_.bindAll(this,"expandTheSearchBar"),this.$searchBar=$(this.searchBar)},expandTheSearchBar:function(){this.$searchBar.toggleClass("open")}}),b.Mobile=function(){this.checkMobile=function(){this.win_height=window.outerHeight,this.win_width=window.outerWidth,this.is_mobile=this.win_width<=a},resized=function(){this.checkMobile(),this.is_mobile?$("#slide").height($("#boundless-slide").height()):$("#slide").removeAttr("style")}.bind(this);var a=768;resized(),$(window).resize(resized)},b.UWTiles=Backbone.View.extend({name:"UW Campus",alt:"UW Map",tileSize:new google.maps.Size(256,256),maxZoom:19,minZoom:1,scrollwheel:!1,streetViewControl:!1,initialize:function(){},getTile:function(a,b,c){var d=c.createElement("DIV");if(!this.withinLoadingBounds(a,b))return d.style.width="256px",d.style.height="256px",d.style.background="#FFFFFF",d;var e=c.createElement("IMG");return e.src="http://www.washington.edu/wp-content/themes/maps/tiles/"+b+"_"+a.x+"_"+a.y+".png",e.onerror=function(){d.removeChild(e),d.style.width="256px",d.style.height="256px",d.style.background="#FFFFFF"},d.appendChild(e),d},withinLoadingBounds:function(a,b){return!(a.x>Math.floor(84049/Math.pow(2,19-b))||a.x<Math.floor(83996/Math.pow(2,19-b))||a.y<Math.floor(182980/Math.pow(2,19-b))||a.y>Math.floor(183017/Math.pow(2,19-b)))}}),b.Video=Backbone.View.extend({template:'<div class="title-blurb"><h2 class="video-title"><%= title %></h2><div class="blurb"><%= text %></div></div><button class="play" aria-controls="video<%= video %>"><span class="top"></span><span class="left"></span><span class="bottom"></span></button><div class="behind boundless-youtube" id="video<%= video %>" aria-label="Video: <%= title %>"></div>',tagname:"div",id:"video",className:"fullscreen",is_playing:!1,preRemove:!1,events:{"click button.play":"buttonClick",keyup:"checkEscape"},initialize:function(a){_.bindAll(this,"render","buttonClick","checkEscape","onReady","onStateChange","youtube_iframe","buttonTransitionDone","iframeTransitionDone"),this.slug=a.slug,this.collection=new b.Video.Collection(VIDEOS),this.render()},render:function(){if(this.model=this.collection.findWhere({slug:this.slug}),!this.model)return console.error("There is no model with slug "+this.slug);this.$el.css({"background-image":'url("'+this.model.get("image")+'")'}).addClass(this.slug);var a=_.template(this.template,this.model.toJSON());b.replaceSlide(this.$el.html(a)),this.youtube_iframe(),this.$button=this.$el.find("button.play")},youtube_iframe:function(){var a={rel:0,controls:0,modestbranding:1,wmode:"transparent"};this.uwplayer=new YT.Player("video"+this.model.get("video"),{videoId:this.model.get("video"),playerVars:a,width:"100%",height:"100%",events:{onReady:this.onReady,onStateChange:this.onStateChange,onError:this.onError}}),this.$iframe=this.$el.find("#video"+this.model.get("video")),this.trigger("slideloaded")},onError:function(a){console.error("There was an error: "+a)},onReady:function(){this.$button.on(b.TransitionEvents,this.buttonTransitionDone),this.$iframe.on(b.TransitionEvents,this.iframeTransitionDone),"boundless"===this.slug&&this.buttonClick()},onStateChange:function(a){0===a.data&&this.is_playing&&this.stopVideo()},buttonClick:function(a){a&&a.stopPropagation(),this.is_playing?this.stopVideo():this.playVideo()},checkEscape:function(a){this.is_playing&&27==a.keyCode&&(a.preventDefault(),this.stopVideo())},playVideo:function(){this.$button.addClass("close")},buttonTransitionDone:function(a){-1!=["right","opacity"].indexOf(a.originalEvent.propertyName)&&(this.$button.hasClass("close")?(this.$iframe.removeClass("behind"),this.uwplayer.loadVideoById(this.model.get("video")),this.is_playing=!0,this.preRemove=!0,this.$button.focus()):this.trigger("removeReady"))},stopVideo:function(a){if(this.is_playing){if("boundless"===this.slug)return Backbone.history.navigate("",{trigger:!0}),void $("body").removeClass("video-active");this.uwplayer.stopVideo(),this.is_playing=!1,this.preRemove=!1,this.$iframe.addClass("behind")}},iframeTransitionDone:function(){this.$iframe.hasClass("behind")?(this.$button.removeClass("close"),$("body").removeClass("video-active")):$("body").addClass("video-active")}}),b.Video.API=Backbone.Model.extend({defaults:{apiReady:!1},initialize:function(){return _.bindAll(this,"ready"),YT&&YT.Player?void this.ready():void(window.onYouTubeIframeAPIReady=this.ready)},ready:function(){this.set("apiReady",!0)}}),b.Video.Model=Backbone.Model.extend({}),b.Video.Collection=Backbone.Collection.extend({initialize:function(){_.bindAll(this,"ready"),this.api=new b.Video.API,this.api.get("apiReady")?this.ready():this.api.on("change:apiReady",this.ready),this.on("error",this.error)},ready:function(){},error:function(){console.error("There was an error fetching the videos")}}),b.Page=Backbone.View.extend({template:"<div id='<%= page.slug %>' class=\"container\"><h3><%= page.title %></h3><%= page.content %></div>",initialize:function(a){this.render()},render:function(){this.$el.html(_.template(this.template,{page:this.model.toJSON()})),this.model.get("image")&&this.$el.css("background","url("+this.model.get("image")+")")}}),b.Pages=Backbone.Collection.extend({}),b.Map=Backbone.View.extend({el:".map",listItems:'<div class="map-navigator"><h2 class="map-title">Seattle landmarks</h2><select class="points-of-interest uw-select"><% _.each( points, function(point) { %><option data-marker="<%= point.title %>"><span><%= point.title  %></span><% }) %></select>',events:{},markers:[],settings:{name:"campusmap",allowedBounds:new google.maps.LatLngBounds(new google.maps.LatLng(47.647523,-122.325039),new google.maps.LatLng(47.664983,-122.290106)),allowedZoom:16,map:{zoom:17,scrollwheel:!1,panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_CENTER},scaleControl:!0,mapTypeControl:!1,streetViewControl:!1,draggable:!0,center:new google.maps.LatLng(47.653851681095,-122.30780562698),minZoom:1,maxZoom:19,disableDoubleClickZoom:!1,styles:[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#c5dac6"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#c5dac6"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"off"},{lightness:20}]},{featureType:"road",elementType:"all",stylers:[{lightness:20}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#c5c6c6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fbfaf7"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#fbfaf7"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"on"},{color:"#acbcc9"}]}]},icon:{purple:{url:$(window).width()<768?"wp-content/themes/be-boundless/less/svg/map-dot.png":"wp-content/themes/be-boundless/less/svg/map-marker-dark.png",size:new google.maps.Size(85,85),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(42.5,42.5)},gold:{url:$(window).width()<768?"wp-content/themes/be-boundless/less/svg/map-dot-gold.png":"wp-content/themes/be-boundless/less/svg/map-marker-gold-light.png",size:new google.maps.Size(85,85),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(42.5,42.5)}},marker:{}},initialize:function(a){_.bindAll(this,"delegateGoogleMapEvents","handleClickListItems","putMarkersOnMap","removeInfoWindows","render","showOverlays"),this.points=new b.Map.Points(POINTS),this.render()},render:function(){this.map=new google.maps.Map(this.el,this.settings.map),this.delegateGoogleMapEvents(),this.infowindow=new b.Map.InfoWindow(this.map),this.bounds=new google.maps.LatLngBounds,this.points.each(this.putMarkersOnMap),this.map.fitBounds(this.bounds),this.showOverlays()},showOverlays:function(){this.$el.append(_.template(this.listItems,{points:this.points.toJSON()}))},handleClickListItems:function(a){var b=$(a.target).html(),c=this.markers[b];$(a.currentTarget).addClass("active").siblings().removeClass("active"),google.maps.event.trigger(c,"click")},delegateGoogleMapEvents:function(){google.maps.event.addListener(this.map,"click",this.removeInfoWindows),google.maps.event.addListener(this.map,"dragstart",this.removeInfoWindows),google.maps.event.addListener(this.map,"zoom_changed",this.removeInfoWindows),google.maps.event.addListenerOnce(this.map,"idle",function(){b.app.set("map",!0)})},putMarkersOnMap:function(a){var b=new google.maps.Marker(this.settings.marker),c=new google.maps.LatLng(a.get("coordinate").latitude,a.get("coordinate").longitude);this.bounds.extend(c),b.setPosition(c),b.setTitle(a.get("title")),b.setMap(this.map),b.setIcon("uw"===a.get("slug")?this.settings.icon.gold:this.settings.icon.purple),b.set("information",a),this.markers[a.get("title")]=b,google.maps.event.addListener(b,"click",_.bind(function(){this.handleClickMarker(b)},this))},handleClickMarker:function(a){this.$el.find('li[data-marker="'+a.getTitle()+'"]').addClass("active").siblings().removeClass("active"),this.map.panTo(a.getPosition()),this.infowindow.render(a),this.infowindow.segueIn()},removeInfoWindows:function(){$(".infowindow").removeClass("open")}}),b.Map.Point=Backbone.Model.extend({}),b.Map.Points=Backbone.Collection.extend({model:b.Map.Point,initialize:function(){},error:function(a){}}),b.Gallery=Backbone.View.extend({el:".gallery",events:{scroll:"close","click li":"open"},settings:{itemSelector:"li",transitionDuration:0},template:'<div class="container"><ul id="grid" class="masonry"><% _.each( images, function( image ) { %> <li class="segue" ><img width="100%" src="<%= image.src.url %>" /> <% }) %></ul></div>',templateInstagram:'<div class="container"><h3> UW on <a href="https://instagram.com/uofwa/?hl=en" title="Instagram">Instagram</a></h3><ul id="grid" class="masonry"><% _.each( images, function( image ) { %> <li class="segue" ><a href="<%= image.link %>" target="_blank" title="A UW instagram image"><img src="<%= image.images.standard_resolution.url %>" height="<%= image.images.standard_resolution.height %>" width="<%= image.images.standard_resolution.width %>" /></a> <% }) %></ul></div>',templateOverlay:"",initialize:function(a){_.bindAll(this,"render","open","close","removeInactive","setMasonry","setDimensions","getImagePosition"),this.instagram=new b.Gallery.Instagram,this.instagram.on("sync",this.render)},render:function(){console.log(this.$el),this.$el.prepend(_.template(this.templateInstagram,{images:this.instagram.toJSON()})),b.app.set("instagram",!0),this.$el.attr("data-height",1e4)},setMasonry:function(a){this.trigger("slideloaded"),this.$grid=this.$el.find("#grid"),this.masonry=new Masonry(this.$grid.get(0),this.settings),this.images.each(this.setDimensions)},setDimensions:function(a,b){var c=this.$el.find("li").eq(b);c.attr({id:a.cid});var d={width:c.width(),left:c.position().left,top:c.position().top},e=_.extend({translateZ:"0px",width:c.width(),left:0},this.getImagePosition(c));a.set({dimensions:e,original:d})},open:function(a){var b=$(a.currentTarget),c=this.images.get(b.attr("id")),d=this.images.findWhere({open:!0});return d?(this.close(),!1):(c.set("open",!0),b.addClass("active").velocity(_.extend(c.get("dimensions"),{top:this.$el.scrollTop()}),500).siblings().addClass("inactive"),!1)},close:function(){var a=this.images.findWhere({open:!0});return a?(a.set("open",!1),this.$grid.find("#"+a.cid).velocity("reverse",this.removeInactive)):void 0},removeInactive:function(){this.$("li").removeClass("active inactive")},getImagePosition:function(a){var b=this.$grid.width()/a.width()*a.height()>.8*$(window).outerHeight(),c=b?a.width()/a.height()*$(window).outerHeight()*.8:this.$grid.width(),d=b?(this.$grid.width()-c-30)/2:0;return{width:c,left:d}}}),b.Gallery.Image=Backbone.Model.extend({defaults:{open:!1,original:{},dimensions:{}}}),b.Gallery.Images=Backbone.Collection.extend({url:"?json=gallery.get_gallery",model:b.Gallery.Image,initialize:function(){this.on("error",this.error),this.fetch()},parse:function(a){return"error"==a.status?this.error(a.error):a[0].images},error:function(a){console.error("There was an error retrieving the gallery: "+a)}}),b.Gallery.Instagram=Backbone.Collection.extend({defaults:{access_token:"201177297.467ede5.d8b1026bbfa741fc8c8d2b391de72fb4",client_id:"d9d55d56f8814f8e83b6492803e9b773",user_id:201177297,count:6},url:function(){return"https://api.instagram.com/v1/users/"+this.defaults.user_id+"/media/recent"},initialize:function(){this.fetch({data:this.defaults,dataType:"jsonp",crossDomain:!0})},parse:function(a){return a.data}}),b.Map.InfoWindow=function(a){this.div=document.createElement("div"),this.div.className="infowindow",this.open=!1,this.setMap(a)},b.Map.InfoWindow.prototype=new google.maps.OverlayView,b.Map.InfoWindow.prototype.render=function(a){var c=this.getProjection(),d=a.getPosition(),e=a.get("information"),f=c.fromLatLngToDivPixel(d),g=40;-1!=this.div.className.indexOf("open")&&(this.div.className+=" switch"),this.div.innerHTML=_.template('<div class="image-mask"><div class="image"><img src="<%= _.first(info.get("image")) %>" title="<%= info.get("title") %>" /><h3><%= info.get("title") %></h3></div></div><div class="text"><p><%= info.get("text") %></p><% if (info.get("cta").text) { %><p class="boundless-button"><span><a href="<%= info.get("cta").url %>"><%= info.get("cta").text %></a></span></p><% } %><span class="close"></span><span class="open"></span></div><div class="arrow"></div>',{info:e}),this.div.style.top=f.y-(this.div.offsetHeight+g)+"px",this.div.style.left=f.x-this.div.offsetWidth/2+"px",b.analytics.trigger("infowindowready")},b.Map.InfoWindow.prototype.segueIn=function(){this.div.style.display="inline",-1===this.div.className.indexOf("open")&&(this.div.className+=" open"),this.map.panBy(0,this.div.offsetHeight/-2),this.div.className=this.div.className.replace(" switch","")},b.Map.InfoWindow.prototype.onAdd=function(){var a=this.getPanes();a.floatPane.appendChild(this.div)},b.Map.InfoWindow.prototype.draw=function(){},b.Map.InfoWindow.prototype.onRemove=function(){this.div.style.display="none",this.div.className="infowindow"},b.getSlide=function(){return this.$slide=this.$slide||$("#slide"),this.$slide},b.replaceSlide=function(a){this.getSlide().html(a)},b.Analytics=function(){_.extend(this,Backbone.Events),$("#nav-wrap li").on({click:function(){ga("send","event","Boundless","click","Navigation item: "+this.id)}}),$("a#static.play").on({click:function(){ga("send","event","Boundless","click","Home brand video played")}}),$(".boundless-button a").on({click:function(){ga("send","event","Boundless","click","Main CTA clicked: "+this.innerHTML+"- "+this.href)}}),this.on("slideloaded",function(){$("#slide .boundless-button a").on({click:function(){ga("send","event","Boundless","click","Slide CTA clicked: "+this.innerHTML+"- "+this.href)}}),$("#slide button.play").on({click:function(){if(!$(this).hasClass("close")){var a=$(this).attr("aria-controls");ga("send","event","Boundless","click","Slide video played: "+$(a).attr("aria-label"))}}})}),this.on("infowindowready",function(){$(".infowindow .boundless-button a").on({click:function(){ga("send","event","Boundless","click","Map Point CTA clicked: "+this.innerHTML+"- "+this.href)}})}),this.ready=!0},b.Scroll=Backbone.View.extend({el:window,events:{scroll:"scroller"},initialize:function(a){var c=!0;this.$BoundlessSlide=$("#boundless-slide"),this.$MobileCheck="none"==$("#dots").css("display")?!0:!1,$(".curtains").curtain({curtainLinks:"#dots a",nextSlide:function(){var a=$(".slide.current"),d=a.index();if(dots=$("#dots li"),dots.removeClass("current-dot").eq(d).addClass("current-dot"),"map"===a.next().attr("id")&&c){var e=b.map.points.findWhere({slug:"uw"});b.map.handleClickMarker(b.map.markers[e.get("title")]),google.maps.event.trigger(b.map.map,"resize"),c=!1}},prevSlide:function(){var a=$(".slide.current").index(),b=$("#dots li");b.each(function(){b.removeClass("current-dot"),b.eq(a).addClass("current-dot")})}}),function(){var a=$(".slide.current").index(),b=$("#dots li");b.each(function(){b.removeClass("current-dot"),b.eq(a).addClass("current-dot")})}()},scroller:function(){var a=this.$BoundlessSlide,b=$(".midground"),c=$(".homepage-text"),d=a.offset().top,e=this.$el.scrollTop(),f=d-e,g=Math.abs(f/2);if(homepageTextDistance=Math.abs(f/1),a.hasClass("current")&&!this.$MobileCheck){b.css("transform","translateY("+g+"px)"),c.css({transform:"translateY("+homepageTextDistance+"px)"}),10>e?c.fadeIn("slow"):this.$MobileCheck||c.fadeOut("slow"),0===e&&(b.css({transform:"translateY(0px)"}),c.css({transform:"translateY(0px)"}))}}})}).call(this);